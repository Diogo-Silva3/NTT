import{c as f,A as w,r as p,j as e,t as b,B as h,v as y}from"./index-54f55d1f.js";import{S as U,I as u,A as L,T as S}from"./input-550c3997.js";import{C as T,a as M,b as D,c as q}from"./card-f93b8688.js";const F=f("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),A=f("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),B=f("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),P=f("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),z=[{id:"admin001",name:"Admin User",email:"admin@example.com",role:"admin",status:"active"},{id:"tech001",name:"Tech User 1",email:"tech1@example.com",role:"technician",status:"active"},{id:"tech002",name:"Tech User 2",email:"tech2@example.com",role:"technician",status:"inactive"}],E=({isOpen:t,onClose:d,onSubmit:m,user:s,roles:x})=>{const{t:n}=w(),[l,r]=p.useState({name:"",email:"",role:x[0]||"",password:""});p.useEffect(()=>{r(s?{name:s.name,email:s.email,role:s.role,password:""}:{name:"",email:"",role:x[0]||"",password:""})},[s,x,t]);const o=c=>{r({...l,[c.target.name]:c.target.value})},j=c=>{if(c.preventDefault(),!l.name||!l.email||!s&&!l.password){y({title:n("error"),description:n("fillAllRequiredFields"),variant:"destructive"});return}m(l)};return t?e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-company-card-bg p-6 rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-company-text-primary mb-4",children:n(s?"editUserTitle":"addUserTitle")}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-company-text-secondary",children:n("userNameLabel")}),e.jsx(u,{type:"text",name:"name",id:"name",value:l.name,onChange:o,required:!0,className:"mt-1 block w-full bg-company-input-bg border-company-border"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-company-text-secondary",children:n("emailLabel")}),e.jsx(u,{type:"email",name:"email",id:"email",value:l.email,onChange:o,required:!0,className:"mt-1 block w-full bg-company-input-bg border-company-border"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-company-text-secondary",children:[n("passwordLabel")," ",s?`(${n("leaveBlankNoChange")})`:""]}),e.jsx(u,{type:"password",name:"password",id:"password",value:l.password,onChange:o,required:!s,className:"mt-1 block w-full bg-company-input-bg border-company-border"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-company-text-secondary",children:n("roleLabel")}),e.jsx("select",{name:"role",id:"role",value:l.role,onChange:o,className:"mt-1 block w-full p-2 bg-company-input-bg border-company-border rounded-md",children:x.map(c=>e.jsx("option",{value:c,children:n(c)},c))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx(h,{type:"button",variant:"ghost",onClick:d,children:n("cancelButton")}),e.jsx(h,{type:"submit",className:"bg-company-brand hover:bg-company-brand/90",children:n(s?"saveChangesButton":"addUserButtonModal")})]})]})]})}):null},$=()=>{const{t}=w(),[d,m]=p.useState(z),[s,x]=p.useState(""),[n,l]=p.useState(!1),[r,o]=p.useState(null),j=["admin","technician"],c=()=>{o(null),l(!0)},v=a=>{o(a),l(!0)},N=a=>{m(d.filter(i=>i.id!==a)),y({title:t("userDeletedTitle"),description:t("userDeletedDesc")})},k=a=>{m(d.map(i=>i.id===a?{...i,status:i.status==="active"?"inactive":"active"}:i)),y({title:t("userStatusUpdatedTitle"),description:t("userStatusUpdatedDesc")})},C=a=>{r?(m(d.map(i=>i.id===r.id?{...r,...a}:i)),y({title:t("userUpdatedTitle"),description:t("userUpdatedDesc")})):(m([...d,{...a,id:`user_${Date.now()}`,status:"active"}]),y({title:t("userAddedTitle"),description:t("userAddedDesc")})),l(!1),o(null)},g=d.filter(a=>a.name.toLowerCase().includes(s.toLowerCase())||a.email.toLowerCase().includes(s.toLowerCase())||t(a.role).toLowerCase().includes(s.toLowerCase()));return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-5xl mx-auto",children:[e.jsxs(T,{className:"bg-company-card-bg border-company-border shadow-lg",children:[e.jsxs(M,{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx(D,{className:"text-2xl text-company-text-primary mb-4 md:mb-0",children:t("userManagementTitle")}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-company-text-secondary h-4 w-4"}),e.jsx(u,{type:"text",placeholder:t("searchUsersPlaceholder"),value:s,onChange:a=>x(a.target.value),className:"pl-10 w-full bg-company-input-bg border-company-border"})]}),e.jsxs(h,{onClick:c,className:"bg-company-brand hover:bg-company-brand/90",children:[e.jsx(A,{className:"h-4 w-4 mr-2"})," ",t("addUserButton")]})]})]}),e.jsxs(q,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-company-border",children:[e.jsx("thead",{className:"bg-company-input-bg/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-company-text-secondary uppercase tracking-wider",children:t("userNameLabel")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-company-text-secondary uppercase tracking-wider",children:t("emailLabel")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-company-text-secondary uppercase tracking-wider",children:t("roleLabel")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-company-text-secondary uppercase tracking-wider",children:t("statusLabel")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-company-text-secondary uppercase tracking-wider",children:t("actionsLabel")})]})}),e.jsx("tbody",{className:"bg-company-card-bg divide-y divide-company-border",children:e.jsx(L,{children:g.map(a=>e.jsxs(b.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},layout:!0,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-company-text-primary",children:a.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-company-text-secondary",children:a.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-company-text-secondary",children:t(a.role)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${a.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t(a.status)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>v(a),className:"text-company-brand-accent hover:text-company-brand-accent/80",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>k(a.id),className:a.status==="active"?"text-yellow-500 hover:text-yellow-600":"text-green-500 hover:text-green-600",children:a.status==="active"?e.jsx(P,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})}),a.role!=="admin"&&e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>N(a.id),className:"text-red-500 hover:text-red-700",children:e.jsx(S,{className:"h-4 w-4"})})]})]},a.id))})})]})}),g.length===0&&e.jsx("p",{className:"text-center py-8 text-company-text-secondary",children:t("noUsersFound")})]})]}),e.jsx(E,{isOpen:n,onClose:()=>l(!1),onSubmit:C,user:r,roles:j})]})};export{$ as default};
