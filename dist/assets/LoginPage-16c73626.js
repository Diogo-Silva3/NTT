import{r as i,j as a,P as S,R as F,c as P,a as T,u as D,b as R,d as A,e as I,m as B,B as M,t as u}from"./index-836d0921.js";import{I as v}from"./input-db65e008.js";import{C as H,a as k,b as q,c as U,d as V,e as $}from"./card-67861140.js";var z="Label",N=i.forwardRef((e,o)=>a.jsx(S.label,{...e,ref:o,onMouseDown:t=>{var l;t.target.closest("button, input, select, textarea")||((l=e.onMouseDown)==null||l.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));N.displayName=z;var w=N;const G=T("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=F.forwardRef(({className:e,...o},t)=>a.jsx(w,{ref:t,className:P(G(),e),...o}));p.displayName=w.displayName;const W=()=>{const{t:e}=D(),o=R(),t=A(),{login:x,user:l,loading:g,createFirstAdmin:J}=I(),[c,C]=i.useState(""),[d,E]=i.useState(""),[b,y]=i.useState(!1),[h,m]=i.useState(""),L=async n=>{var f,j;if(n.preventDefault(),m(""),!c||!d){m(e("fillAllFieldsError")),u({title:e("error"),description:e("fillAllFieldsError"),variant:"destructive"});return}y(!0);try{const s=await x(c,d);u({title:e("loginSuccessTitle"),description:e("loginSuccessDesc",{name:s.name||s.email})});const r=s.role==="admin"?"/admin":"/checklist";o(((j=(f=t.state)==null?void 0:f.from)==null?void 0:j.pathname)||r,{replace:!0})}catch(s){let r=e("loginErrorTitle");s.code==="auth/user-not-found"||s.code==="auth/wrong-password"||s.code==="auth/invalid-credential"?r=e("invalidCredentialsError"):s.message&&(r=s.message),m(r),u({title:e("loginErrorTitle"),description:r,variant:"destructive"})}finally{y(!1)}};return a.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center min-h-[calc(100vh-200px)]",children:a.jsxs(H,{className:"w-full max-w-md shadow-2xl bg-company-card-bg",children:[a.jsxs(k,{className:"text-center",children:[a.jsx(q,{className:"text-3xl font-bold text-company-brand",children:e("loginTitle")}),a.jsx(U,{className:"text-company-text-secondary",children:e("loginSubtitle")})]}),a.jsx(V,{children:a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"email",className:"text-company-text-primary",children:e("emailLabel")}),a.jsx(v,{id:"email",type:"email",placeholder:e("emailPlaceholder"),value:c,onChange:n=>C(n.target.value),required:!0,className:"bg-company-input-bg border-company-border focus:ring-company-brand focus:border-company-brand",autoComplete:"email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"password",className:"text-company-text-primary",children:e("passwordLabel")}),a.jsx(v,{id:"password",type:"password",placeholder:e("passwordPlaceholder"),value:d,onChange:n=>E(n.target.value),required:!0,className:"bg-company-input-bg border-company-border focus:ring-company-brand focus:border-company-brand",autoComplete:"current-password"})]}),h&&a.jsx("p",{className:"text-sm text-red-500 text-center",children:h}),a.jsx(M,{type:"submit",className:"w-full bg-company-brand text-company-brand-foreground hover:bg-company-brand/90",disabled:b||g,children:e(b||g?"loggingInButton":"loginButton")})]})}),a.jsx($,{className:"text-center text-sm text-company-text-secondary",children:a.jsx("p",{children:e("loginHintFirebase")})})]})})};export{W as default};
